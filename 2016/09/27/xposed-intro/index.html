<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Enjoy Code Life">
    

    <!--Author-->
    
        <meta name="author" content="GoodOak">
    

    <!-- Title -->
    
    <title>Xposedå®ç°è¿‡ç¨‹ | Code | Oak&#39;s hexo</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Xposedå®ç°è¿‡ç¨‹</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h1 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1. ä»‹ç»"></a>1. ä»‹ç»</h1><h2 id="1-1-æ¦‚è¿°"><a href="#1-1-æ¦‚è¿°" class="headerlink" title="1.1 æ¦‚è¿°"></a>1.1 æ¦‚è¿°</h2><p>Xposedæ˜¯ä¸€ä¸ªç”¨äºå®ç°AndroidåŠ¨æ€åŠ«æŒé¡¹ç›®çš„å¹³å°ã€‚é€šè¿‡æ§åˆ¶æ›¿æ¢/system/bin/app_processæ–‡ä»¶æ¥æ§åˆ¶Zygoteè¿›ç¨‹ã€‚ç”±äºAndroidä¸­çš„å¤§éƒ¨åˆ†ç¨‹åºï¼ˆåŒ…æ‹¬ä¸€äº›æœåŠ¡è¿›ç¨‹ï¼‰éƒ½æ˜¯ç”±Zygoteåˆ›å»ºï¼Œapp_processåœ¨å¯åŠ¨æ—¶åŠ è½½XposedBridge.jaræ¥å®Œæˆè¿›ç¨‹çš„åŠ«æŒï¼Œä¹Ÿå°±å¯ä»¥è¾¾åˆ°åŠ«æŒæ‰‹æœºç³»ç»Ÿçš„ç›®çš„ã€‚</p>
<p>Xposedçš„èµ„æºåœ°å€ä¸ºï¼š</p>
<p><a href="https://github.com/rovo89" target="_blank" rel="external">Xposed Github</a></p>
<p>å…¶ä¸­ä¸»è¦åŒ…å«ä¸‰ä¸ªé¡¹ç›®ï¼š</p>
<ul>
<li><p>XposedBridge: è¯¥å·¥ç¨‹ç¼–è¯‘åæ˜¯ä¸€ä¸ªjaråŒ…ï¼Œè´Ÿè´£åŠ«æŒæ¡†æ¶çš„javaå±‚çš„å®ç°ï¼Œå¹¶è´Ÿè´£ä¸nativeå±‚è¿›è¡Œäº¤äº’ã€‚å…¶ä»–åŠ«æŒæ¨¡å—çš„å¼€å‘å’Œæ“ä½œéƒ½æ˜¯åŸºäºè¿™ä¸ªjaråŒ…ã€‚</p>
</li>
<li><p>Xposed: Xposedçš„c++éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºæ›¿æ¢/system/bin/app_process, å…¶æ¬¡è¿˜ä¸ºXposedBridgeæä¾›jniçš„æ”¯æŒã€‚</p>
</li>
<li><p>XposedInstaller: Xposedçš„å®‰è£…ç¨‹åºï¼Œè´Ÿè´£Xposedçš„ç¯å¢ƒè®¾ç½®ä»¥åŠæä¾›xposedæ¨¡å—çš„ç®¡ç†æ¡†æ¶ã€‚</p>
</li>
</ul>
<h2 id="1-2-è¿è¡Œæœºåˆ¶"><a href="#1-2-è¿è¡Œæœºåˆ¶" class="headerlink" title="1.2 è¿è¡Œæœºåˆ¶"></a>1.2 è¿è¡Œæœºåˆ¶</h2><h3 id="1-2-1-Zygote"><a href="#1-2-1-Zygote" class="headerlink" title="1.2.1 Zygote"></a>1.2.1 Zygote</h3><p>åœ¨Androidç³»ç»Ÿä¸­ï¼Œåº”ç”¨çš„è¿›ç¨‹éƒ½æ˜¯ç”±Zygoteæ¥å­µåŒ–ï¼Œè€ŒZygoteç”±initè¿›ç¨‹å¯åŠ¨ã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶Zygoteè¿›ç¨‹å°±åˆ›å»ºäº†ä¸€ä¸ªDalvikè™šæ‹Ÿæœºçš„å®ä¾‹ã€‚å½“Zygoteå­µåŒ–æ–°çš„åº”ç”¨è¿›ç¨‹æ—¶ï¼Œè¿™ä¸ªDalvikè™šæ‹Ÿæœºçš„å®ä¾‹ä¹Ÿä¼šè¢«å¤åˆ¶åˆ°æ–°çš„è¿›ç¨‹ä¸­ã€‚æ¯ä¸ªAppè¿›ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºå®ä¾‹ã€‚</p>
<p>Zygoteåœ¨å¯åŠ¨æ—¶ä¸ä»…ä¼šåˆ›å»ºè™šæ‹Ÿæœºï¼Œè€Œä¸”è¿˜ä¼šé¢„åŠ è½½ä¸€äº›åŸºç¡€çš„javaè¿è¡Œåº“ï¼Œä»¥åŠæ³¨å†Œä¸€äº›å¿…è¦çš„jniçš„æ–¹æ³•ã€‚è¿™æ˜¯æ­£æ˜¯åŠ è½½XposedBridgeçš„æ—¶æœºï¼ŒXposedBreidgeä¸­æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºhookçš„nativeæ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡javaçš„åå°„æœºåˆ¶ï¼Œè¦†ç›–æ‰äº†åŸå…ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦hookçš„javaæ–¹æ³•ã€‚</p>
<h3 id="1-2-2-Hook-Replace"><a href="#1-2-2-Hook-Replace" class="headerlink" title="1.2.2 Hook/Replace"></a>1.2.2 Hook/Replace</h3><p>Xposedçš„ä¸»è¦å·¥ä½œæ˜¯è¿›è¡Œhookã€‚ç›¸è¾ƒXposedæ¥è¯´ï¼Œä¸ºäº†ä¿®æ”¹appï¼Œé‡æ‰“åŒ…çš„è¯å°±éœ€è¦ä¿®æ”¹smaliä»£ç ï¼Œå³ä¾¿æ˜¯åŠ¨æ€çš„æ›¿æ¢smaliä»£ç ï¼Œä¹Ÿä¼šå› ä¸ºä»£ç çš„å¤æ‚ä½¿å¾—å·¥ä½œå˜å¾—ç¹æ‚ã€‚Xposedçš„å¥½å¤„åœ¨äºçœå»äº†é‡æ‰“åŒ…å’Œä¿®æ”¹smaliä»£ç å¸¦æ¥çš„éº»çƒ¦ã€‚<br>ZygoteåŠ è½½XposedBridgeä¹‹åï¼Œå°†ä¼šæŠŠæ‰€æœ‰éœ€è¦hookçš„æ–¹æ³•éƒ½æ›¿æ¢ä¸ºåä¸ºhookMethodNativeçš„jniå‡½æ•°ï¼Œè¯¥å‡½æ•°å¤„ç†ç›¸åº”çš„å‚æ•°ï¼ˆè¢«hookçš„å‡½æ•°åç§°ï¼Œhookçš„æ–¹æ³•ï¼‰åï¼Œé€šè¿‡åå°„è°ƒç”¨javaæ–¹æ³•handleHookedMethodï¼Œå¹¶ç”±handleHookedMethodå®Œæˆç”¨æˆ·æŒ‡å®šçš„hooké€»è¾‘ã€‚å…¶ä¸»è¦é€»è¾‘ä¸ºå°†è¢«HOOKçš„ç›®æ ‡å‡½æ•°çš„å±æ€§ç”±Javaä¿®æ”¹ä¸ºNativeï¼Œå¹¶èµ‹äºˆç‰¹å®šçš„Nativeå‡½æ•°å®ç°ã€‚è€Œåœ¨å¯¹åº”çš„Nativeå‡½æ•°ä¸­ï¼Œxposedåå°„è°ƒç”¨XposedBridge.jarä¸­çš„Javaå‡½æ•°handleHookedMethodï¼Œä»è€Œå®ç°å¯¹ç›®æ ‡å‡½æ•°çš„Hookã€‚è¿™æ ·çš„å®ç°å·§å¦™ä¹‹å¤„åœ¨äºï¼Œä¸å½±åƒè¢«hookå‡½æ•°çš„å…·ä½“å®ç°çš„æƒ…å†µä¸‹ï¼Œå°†ç›®æ ‡å‡½æ•°çš„æ‰§è¡Œé‡æ–°æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„Javaå‡½æ•°ï¼Œè€Œåœ¨è¿™ä¸ªJavaå‡½æ•°ä¸­å¯ä»¥å®ç°å„ç§å„æ ·çš„hooké€»è¾‘ï¼Œå¦‚æ‰§è¡Œå¤šä¸ªä¸åŒæ¨¡å—çš„hooké€»è¾‘ï¼Œå¹¶ä¸”åŒºåˆ†å„ä¸ªæ¨¡å—çš„ä¼˜å…ˆçº§ã€‚<br>Xposedçš„hooké€»è¾‘æ˜¯è¿™æ ·çš„ï¼Œæ¯ä¸ªhookæ¨¡å—ä¸­å¯ä»¥å®šä¹‰ç›¸åº”çš„å‡½æ•°åœ¨ç›®æ ‡å‡½æ•°æ‰§è¡Œä¹‹å‰æˆ–æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚Xposedçš„Hookå¯ä»¥ç”¨æµç¨‹å›¾è¡¨ç¤ºä¸ºã€‚</p>
<img src="http://res.cloudinary.com/dcn1avvzr/image/upload/c_scale,q_88,w_1200/v1484728348/xposed_flow_chat.png" title="æµç¨‹å›¾">
<p>åœ¨å®‰è£…Xposedæ¡†æ¶ä¹‹åçš„æ‰‹æœºä¸­ï¼Œæ¯ä¸ªAppè¿›ç¨‹å¯åŠ¨ä¹‹ååœ¨å†…å­˜ç©ºé—´ä¸­éƒ½åŠ è½½äº†XposedBridge.jarå’Œmodules.jar(å·²ç»å®‰è£…çš„hookæ¨¡å—)ã€‚å…¶ä¸­XposedBridge.jarè´Ÿè´£æ‰§è¡Œmodules.jarä¸­çš„hookä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹å›¾ã€‚</p>
<img src="http://res.cloudinary.com/dcn1avvzr/image/upload/v1484730645/xposed_flow_chat1.png" title="æµç¨‹å›¾">
<h1 id="2-ä»£ç åˆ†æ"><a href="#2-ä»£ç åˆ†æ" class="headerlink" title="2. ä»£ç åˆ†æ"></a>2. ä»£ç åˆ†æ</h1><h2 id="2-1-app-processçš„æ›¿æ¢"><a href="#2-1-app-processçš„æ›¿æ¢" class="headerlink" title="2.1 app_processçš„æ›¿æ¢"></a>2.1 app_processçš„æ›¿æ¢</h2><p>Xposedæ˜¯é€šè¿‡æ›¿æ¢app_processæ¥å®ç°Androidä¸Šçš„æ‰€æœ‰Appéƒ½åŠ è½½äº†XposedBridge.jarã€‚è€Œè¿™ä¸ªè¿‡ç¨‹çš„ä»£ç å°±åœ¨Xposedé¡¹ç›®ä¸­ã€‚app_processçš„mainå‡½æ•°ååˆ†ç®€çŸ­ï¼ŒXposedçš„å®ç°æ˜¯ä¿®æ”¹äº†mainå‡½æ•°çš„å®ç°ä¹‹åï¼Œç¼–è¯‘ä¸€ä»½æ–°çš„æ¥æ›¿æ¢ç›®æ ‡æ‰‹æœºåŸæœ‰çš„app_processæ–‡ä»¶ã€‚</p>
<p>å…¶ä»£ç å·®å¼‚ä¸º<br><figure class="highlight c"><figcaption><span>android æºç </span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (zygote) &#123;</div><div class="line">    runtime.start(<span class="string">"com.android.internal.os.ZygoteInit"</span>,</div><div class="line">            startSystemServer ? <span class="string">"start-system-server"</span> : <span class="string">""</span>);</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (className) &#123;</div><div class="line">    <span class="comment">// Remainder of args get passed to startup class main()</span></div><div class="line">    runtime.mClassName = className;</div><div class="line">    runtime.mArgC = argc - i;</div><div class="line">    runtime.mArgV = argv + i;</div><div class="line">    runtime.start(<span class="string">"com.android.internal.os.RuntimeInit"</span>,</div><div class="line">            application ? <span class="string">"application"</span> : <span class="string">"tool"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Error: no class name or --zygote supplied.\n"</span>);</div><div class="line">    app_usage();</div><div class="line">    LOG_ALWAYS_FATAL(<span class="string">"app_process: no class name or --zygote supplied."</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">10</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight c"><figcaption><span>Xposed(app_main.cpp) æºç </span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Â  Â  <span class="keyword">if</span> (zygote) &#123;</div><div class="line">Â  Â  Â  Â  runtime.start(isXposedLoaded ? <span class="string">"de.robv.android.xposed.XposedBridge"</span> : <span class="string">"com.android.internal.os.ZygoteInit"</span>,</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  startSystemServer ? <span class="string">"start-system-server"</span> : <span class="string">""</span>);</div><div class="line">Â  Â  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (className) &#123;</div><div class="line">Â  Â  Â  Â  <span class="comment">// Remainder of args get passed to startup class main()</span></div><div class="line">Â  Â  Â  Â  runtime.mClassName = className;</div><div class="line">Â  Â  Â  Â  runtime.mArgC = argc - i;</div><div class="line">Â  Â  Â  Â  runtime.mArgV = argv + i;</div><div class="line">Â  Â  Â  Â  runtime.start(isXposedLoaded ? <span class="string">"de.robv.android.xposed.XposedBridge$ToolEntryPoint"</span> : <span class="string">"com.android.internal.os.RuntimeInit"</span>,</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  application ? <span class="string">"application"</span> : <span class="string">"tool"</span>);</div><div class="line">Â  Â  &#125; <span class="keyword">else</span> &#123;</div><div class="line">Â  Â  Â  Â  <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Error: no class name or --zygote supplied.\n"</span>);</div><div class="line">Â  Â  Â  Â  app_usage();</div><div class="line">Â  Â  Â  Â  LOG_ALWAYS_FATAL(<span class="string">"app_process: no class name or --zygote supplied."</span>);</div><div class="line">Â  Â  Â  Â  <span class="keyword">return</span> <span class="number">10</span>;Â </div><div class="line">Â  Â  &#125; Â </div></pre></td></tr></table></figure>
<p>ä»ä»£ç å·®å¼‚å³å¯çŸ¥é“xposedçš„å®ç°è¿‡ç¨‹ã€‚</p>
<h2 id="2-2-ç›®æ ‡å‡½æ•°çš„hook"><a href="#2-2-ç›®æ ‡å‡½æ•°çš„hook" class="headerlink" title="2.2 ç›®æ ‡å‡½æ•°çš„hook"></a>2.2 ç›®æ ‡å‡½æ•°çš„hook</h2><p>ç›®æ ‡å‡½æ•°çš„hookä¸»è¦ç”±Xposedé¡¹ç›®ä¸­çš„XposedBridge_hookMethodNativeå‡½æ•°æ¥å®Œæˆï¼Œå…¶æ˜¯XposedBridge.jarä¸­hookMethodNativeå‡½æ•°çš„jniå®ç°ã€‚<br>ä»£ç ä¸ºï¼š</p>
<figure class="highlight c"><figcaption><span>Xposedæºç </span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">XposedBridge_hookMethodNative</span><span class="params">(JNIEnv* env, jclass clazz, jobject reflectedMethodIndirect,</span></span></div><div class="line">Â  Â  Â  Â  Â  Â  jobject declaredClassIndirect, jint slot, jobject additionalInfoIndirect) &#123;</div><div class="line">Â  Â  ClassObject* classObject = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">Â  Â  <span class="comment">// Find the internal representation of the method</span></div><div class="line">Â  Â  ClassObject* declaredClass = (ClassObject*) dvmDecodeIndirectRef(dvmThreadSelf(), declaredClassIndirect);</div><div class="line">Â  Â  Method* method = dvmSlotToMethod(declaredClass, slot);</div><div class="line">Â  Â </div><div class="line">Â  Â  classObject = method-&gt;clazz;</div><div class="line">Â  Â </div><div class="line">Â  Â  <span class="comment">// Save a copy of the original method and other hook info</span></div><div class="line">Â  Â  XposedHookInfo* hookInfo = (XposedHookInfo*) <span class="built_in">calloc</span>(<span class="number">1</span>, <span class="keyword">sizeof</span>(XposedHookInfo));</div><div class="line">Â  Â  <span class="built_in">memcpy</span>(hookInfo, method, <span class="keyword">sizeof</span>(hookInfo-&gt;originalMethodStruct));</div><div class="line">Â  Â  hookInfo-&gt;reflectedMethod = dvmDecodeIndirectRef(dvmThreadSelf(), env-&gt;NewGlobalRef(reflectedMethodIndirect));</div><div class="line">Â  Â  hookInfo-&gt;additionalInfo = dvmDecodeIndirectRef(dvmThreadSelf(), env-&gt;NewGlobalRef(additionalInfoIndirect));</div><div class="line"></div><div class="line">Â  Â  <span class="comment">// Replace method with our own code</span></div><div class="line">Â  Â  SET_METHOD_FLAG(method, ACC_NATIVE);</div><div class="line">Â  Â  method-&gt;nativeFunc = &amp;hookedMethodCallback;</div><div class="line">Â  Â  method-&gt;insns = (<span class="keyword">const</span> u2*) hookInfo;</div><div class="line">Â  Â  method-&gt;registersSize = method-&gt;insSize;</div><div class="line">Â  Â  method-&gt;outsSize = <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»ä»£ç ä¸­çœ‹åˆ°æŒ‡é’ˆmethodæŒ‡å‘äº†åŸå‡½æ•°çš„å¯¹è±¡ï¼Œé€šè¿‡å®SET_METHOD_FLAGå°†methodè®¾ç½®ä¸ºäº†nativeå±æ€§ã€‚</p>
<p>è€ŒhookInfoæŒ‡é’ˆæŒ‡å‘äº†å¯¹åº”çš„ä¿å­˜åŸå‡½æ•°å®ç°å’Œhookå‡½æ•°çš„å†…å­˜ç©ºé—´ã€‚</p>
<p>è€Œmethod-&gt;insnsï¼ŒåŸå…ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´æ˜¯åŸå‡½æ•°çš„å­—èŠ‚ç ï¼Œç°åœ¨æŒ‡å‘äº†hookInfoã€‚method-&gt;nativeFuncæŒ‡å‘äº†ä¸€ä¸ªå›ºå®šçš„å®ç°hooké€»è¾‘çš„å‡½æ•°ã€‚é€šè¿‡è¿™é‡Œçš„ä¸€ä¸ªå…³é”®çš„æ“ä½œï¼Œxposedå®ç°äº†hookç›®æ ‡å‡½æ•°çš„ç¬¬ä¸€æ­¥ï¼Œä¿®æ”¹åŸå‡½æ•°çš„å±æ€§ï¼ŒåŠ«æŒå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p>å½“hookedMethodCallbackæ‰§è¡Œæ—¶ï¼Œxposedå¯ä»¥é€šè¿‡hookInfoä¸­çš„ä¿¡æ¯ï¼Œæ¥æ‰§è¡ŒåŸå‡½æ•°å’Œhookå‡½æ•°ã€‚</p>
<h1 id="3-ç›¸å…³çš„ç‚¹"><a href="#3-ç›¸å…³çš„ç‚¹" class="headerlink" title="3. ç›¸å…³çš„ç‚¹"></a>3. ç›¸å…³çš„ç‚¹</h1><h2 id="3-1-Xposedçš„ä¸¤ä¸ªHookæ¥å£"><a href="#3-1-Xposedçš„ä¸¤ä¸ªHookæ¥å£" class="headerlink" title="3.1 Xposedçš„ä¸¤ä¸ªHookæ¥å£"></a>3.1 Xposedçš„ä¸¤ä¸ªHookæ¥å£</h2><p>Androidä¸­çš„Javaè¿›ç¨‹åˆ†ä¸ºAppè¿›ç¨‹å’Œç³»ç»Ÿè¿›ç¨‹ï¼ˆå¦‚System_process)ã€‚è¿™ä¸¤ç±»è¿›ç¨‹çš„hookå¯¹åº”äº†ä¸¤ä¸ªä¸åŒçš„hookæ¥å£ã€‚</p>
<ul>
<li><p>IXposedHookLoadPackage</p>
<p>å¼€å‘è€…éœ€è¦å®ç°æ¥å£handleLoadPackage()ã€‚è¯¥æ¥å£åœ¨Appè¢«åŠ è½½æ—¶è°ƒç”¨ï¼Œç”¨äºAppåº”ç”¨çš„Hookã€‚</p>
</li>
<li><p>IXposedHookZygoteInit</p>
<p>å¼€å‘éœ€è¦å®ç°æ¥å£initZygote()ã€‚è¯¥æ¥å£åœ¨Zygoteå¯åŠ¨æ—¶è°ƒç”¨ï¼Œç”¨äºç³»ç»ŸæœåŠ¡çš„Hookã€‚</p>
</li>
</ul>
<h2 id="3-2-å¤šä¸ªClassLoader"><a href="#3-2-å¤šä¸ªClassLoader" class="headerlink" title="3.2 å¤šä¸ªClassLoader"></a>3.2 å¤šä¸ªClassLoader</h2><p>ç”±äºAndroidå¯ä»¥åŠ¨æ€åŠ è½½jaråŒ…ï¼Œæƒ³è¦hookåŠ¨æ€åŠ è½½çš„jaråŒ…ä¸­çš„å‡½æ•°ï¼Œéœ€è¦å¼€å‘äººå‘˜æŒ‡å®šç›®æ ‡ClassLoaderå†æ¬¡è¿›è¡ŒHookã€‚</p>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                            

<a href="/tags/Android/">Android</a>


                        
                    </div>
                    <div class="post-date">
                        2016 å¹´ 09 æœˆ 27 æ—¥
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 ğŸ™‹ Â© 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>